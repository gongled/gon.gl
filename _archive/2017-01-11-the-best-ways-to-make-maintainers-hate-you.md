---
title: Разработчикам свободного ПО от мейнтейнера
updated: 2017-02-14
---

## О мейнтейнерах

Хочу оговориться, что речь пойдёт преимущественно о разработке открытого ПО,
поскольку советы больше подходят именно для опенсорса. В закрытой разработке
коммерческого продукта советы могут быть вредными. А ещё это только моё мнение,
могу ошибаться.

Мейнтейнеры — это участники сообщества, которые собирают новые версии пакета,
следят за ошибками, которые заводят пользователи в багтрекере и
общаются с upstream-разработчиками программы.

Мейнтейнеры:
- следят за современностью и актуальностью поддерживаемых им пакетов
- исправляют ошибки, связанные с безопасностью
- исправляют ошибки, связанные с некорректным функционированием программ.
- участвуют в списках рассылки
- ...

### Выпуск продукта

#### Скорость релиза — не главное

Старайтесь выпускать новые версии своего продукта размеренно, укрупняя важные изменения в один релиз. Частые релизы хорошо подходят компаниям, развивающим собственный продукт. Например, команда GitHub [выпускает 12600 версий в год](https://github.com/blog/1241-deploying-at-github), поскольку их инженеры доставляют продукт на сервера, которые сами же и используют.

Если программа запускается у пользователя, то частые релизы приводят к частой сборке и обновлению. В этом случае практически никогда нет смысла выпускать версии слишком часто: пользователи не будут успевать обновляться, а мейнтейнеры — готовить пакеты, тестировать их и публиковать в репозитории.

Лучше делать релизы реже, собирая несколько изменений в один. Спланируйте какие фишки должны войти
в следующий выпуск: [создайте майлстоун](https://help.github.com/articles/about-milestones/), опишите в нём список задач и обозначьте дату окончания. В случае, когда это сделать не получается, сообщите участникам о предстоящем выпуске в вашем блоге или списке рассылок.

Так участники проекта будут в ваших планов и смогут заранее подготовиться.

#### Работа с сообществом

Публикуя исходный код проекта в открытом доступе, стоит понимать, что другие разработчики захотят помочь. Авторам проектов стоит уделить внимание приёму пулл-реквестов.

Установите правила: напишите руководство сотрудничества (Contribution Guide) и разместите его в файле CONTRIBUTING.md. [Гитхаб это понимает](https://help.github.com/articles/setting-guidelines-for-repository-contributors/) и показывает плашку на странице ишьюсов и пулл-реквестов. Или ничего не пишите и вмерживайте любые присылаемые пулл-реквесты, чтобы затем привести код в порядок. А ещё можно не принимать изменения вовсе — правда об этом всё равно лучше написать.

Создайте обратную связь: оставляйте комментарии к пулл-реквестам и тикетам. Плохо оставлять их без внимания, ровно как и отклонять предложения без объяснения причин.

#### Версионируйте релизы правильно

Среди разработчиков свободного ПО есть мнение, что хеш коммита — хороший выбор для версии. Это не так:

- Хеши нельзя сравнить друг с другом. Пакетный менеджер не знает, какая редакция ПО вышла раньше, а какая позже.
- Хеш тяжело запомнить. Версии нужны как машинам, так и пользователям.
- Хеш не несёт в себе смысла: По нему нельзя сказать о важности обновления.

Номер версии должен помогать администраторам систем и мейнтейнерам связанных программ оценить влияние обновления. Не заглядывая в исходный код, лучше всего об скажет версия. Потому мне нравится [семантическое](http://semver.org/) и [романтическое](http://dafoster.net/articles/2015/03/14/semantic-versioning-vs-romantic-versioning/) версионирование, а последовательные, алфавитно-цифровые, датированные — нет.

Плохой пример: разработчики библиотеки x264 [используют составной идентификатор](https://download.videolan.org/x264/snapshots/) из даты и номера снапшота (который почему-то не меняется с августа 2005-го года). Выходит, о потере совместимости нельзя будет узнать из номера версии. Потому к версии этого пакета дописывают префикс — версию API из константы `X264_BUILD` из [заголовочного файла x264.h](https://git.videolan.org/?p=x264.git;a=blob;f=x264.h).

#### Never publish direct links on release build

Рассказать о прямых ссылках на архивы:
- Тегируйте релиз-коммиты, на Гитхабе они превращаются в версии. Их можно скачать по прямым ссылкам.
- А ещё лучше загружать на сервер, считать хеш-сумму и прикладывать рядом. Если релизный архив нужно как-то подготовить (например, выкачать зависимости для Go), то их тоже лучше собрать в тот же архив. Это должна быть полностью воспроизводимая херня.
- Мейнтейнеры скажут спасибо: rpmbuild не умеет работать с VCS, ему нужны ссылки на архивы.

#### Ведите чейджлог

Ваши пользователя хотят знать что и почему изменилось, ведь им важно с чем они работают. Помните, чейджлог больше нужен людям, чем машинам, а потому лог коммитов — это плохое решение. В мире пользователя полезны ключевые изменения в проекте и как ему с ними работать.

Создайте файл CHANGELOG.md и перед выпуском новой версии укажите в нём список того, что добавили, исправили, удалили и что планируете удалить в будущем. Прочтите как делать чейджлоги на сайте [Keep a Changelog](http://keepachangelog.com/en/1.0.0/). Обратите внимание на [пример хорошего ведения лога в проекте Marathon](https://github.com/mesosphere/marathon/blob/master/changelog.md).

#### Документация

Согласно [статистике W3Techs года](https://w3techs.com/technologies/overview/content_language/all), в сентябре 2017-го половина всех сайтов в Интернете содержит тексты на английском языке. Поэтому если вы хотите, чтобы вас понимали, пишите документацию сначала на английском языке, а затем на остальных.

Из этого правила есть исключение: ваша аудитория являющейся носителем конкретного языка. Один из немногих примеров такого открытого ПО — типографический класс LaTeX для вёрстки документов в соответствии с требованиями ЕСКД РФ. Документация к проекту написана на русском языке.



- Be creative and use any other language than English
- Installation guide is not important
- Building guide is for losers
- Never write comments in configuration files
- Contribution guide is for morons
- Keep your license in secret
- Never publish human-readable changelog
- Don't let your users to disclose your email

#### Building management

- Never use Makefile
- Use cURL and bash as the only way to build the software
- Make sure your project can't be built locally
- Include as many precompiled binaries as possible
- Use features from the latest version of compiler
- Life is too short for writing list of build deps
- Don't tell anyone about particular versions of deps

#### Publishing

- Customize installation process with tons of shell code
- There is no any distros apart from the ones I use
- There is no language versions apart from the ones I have

#### Maintenance

- Turn off SELinux and AppArmor
- `--help` and `man` are useless, no-one is using them
- Forget about samples of configuration files
- These configurations might be broken after installation.
